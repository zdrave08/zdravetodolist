
<link rel="import" href="../bower_components/polymer/polymer.html">

<!-- import paper elements -->
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">

<!-- impoert iron elements -->
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">


<dom-module id="todo-element" attributes="task user rid">
<style>
   /*style prototype*/
   .todo-element{
   	padding: 10px;
   }
   paper-material{
   	background: #fff;
   	max-width: 640px;
   	width: 90%;
   	margin: 25px auto;
   	position: relative;
   }
   paper-checkbox{
   	float: right;
   	margin: 20px 20px;
   }
   paper-button{
   	background: #ccc;
   }
   paper-fab {
   	position: absolute;
   	background: #ccc;
   	bottom: 30px;
   	right: 40px;
   }
   .done{
   	background: #00b200;
   }
   paper-input{
   	margin: 0 20px;
   }
   .info{
   	font-size: 14px;
   	font-style: italic;
   	color: #696969;
   	padding-top: 0;
   	padding-bottom: 0;
   }
   .info span{
   	margin-left: 5px;
   }

</style>

    <template>
    	
    	<paper-material class="todo-element" elevation="1">

	      <paper-checkbox checked="{{completed}}"></paper-checkbox>
	      <paper-fab hidden={{editing}}  icon="icons:create" on-tap="doEdit" class="edit" mini></paper-fab>
	      <paper-fab hidden={{!editing}} icon="icons:done"   on-tap="doEdit" class="done" mini></paper-fab>
	      <paper-item hidden="{{editing}}" id="task">{{task}}</paper-item>
	      <paper-input id="edit" hidden="{{!editing}}" value="{{task}}"></paper-input>
	      <paper-item class="info">Created by: <span>{{ user }}</span></paper-item>
	      <paper-item class="info">{{ time }}</paper-item>

       </paper-material> 

	</template>

</dom-module>

	<script>

	  // element registration
  Polymer({
    is: "todo-element",

    // add properties and methods on the element's prototype

    properties: {
    	// declare properties for the element
		user: {
			type: String,
			value: ""	
		},
		task: {
        	type: String,
			value: "Hello!"
    	},
    	rid: {
	    	type: Number,
	    	value: -1
    	},
    	time: {
	    	type: String,
	    	value: new Date().toLocaleString()
	    },
		completed: {
	    	type: Boolean,
			value: false,
			observer:'compChanged'
    	},
    	editing: {
	    	type: Boolean,
	    	value: false	
    	}
    },
    compChanged: function(e){
      if(e){ 
	    	this.fire('complete',this); 
	    }
    },
    doEdit: function(e){
    	this.editing=!this.editing;
    	if (!this.editing){ 
    		this.fire('edit', {rid:this.rid, task:this.task}); 
    	}
	},
	ready: function(e){
	}
  });

	</script>
